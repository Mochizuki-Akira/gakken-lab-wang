<!DOCTYPE html>

<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>十二、無機化合物</title>
<!-- 打印模式识别（学生/教师） -->
<style>
  /* 打印时严格按当前视图输出（避免 revert 兼容性问题） */
  @media print {
    /* 学生视图：隐藏教师内容 */
    body:not(.teacher-mode) .teacher-only {
      display: none !important;
      visibility: hidden !important;
    }
    /* 教师视图：明确显示各种区块/列表 */
    body.teacher-mode .teacher-only { visibility: visible !important; }
    body.teacher-mode p.teacher-only,
    body.teacher-mode div.teacher-only,
    body.teacher-mode section.teacher-only,
    body.teacher-mode article.teacher-only,
    body.teacher-mode table.teacher-only,
    body.teacher-mode ol.teacher-only,
    body.teacher-mode ul.teacher-only {
      display: block !important;
    }
    body.teacher-mode li.teacher-only {
      display: list-item !important;
    }
  }
</style>
<!-- 页面基础排版 -->
<style>
  body {
    font-family:"Hiragino Kaku Gothic ProN",sans-serif;
    max-width:900px;
    margin:0 auto;
    padding:32px;
    line-height:1.7;
    color:#111
  }
  h1,h2,h3{margin:16px 0}
  table{border-collapse:collapse;width:100%;margin:12px 0}
  td,th{border:1px solid #ddd;padding:6px;vertical-align:top}
  ol,ul{margin:0 0 12px 24px}
</style>
<!-- 色彩主题与打印分页 -->
<style>
  :root{
    --ink:#0f172a;
    --muted:#475569;
    --border:#e2e8f0;
    --bg:#ffffff;
    --accent:#2563eb;
  }
  html,body{background:var(--bg);color:var(--ink);}
  body{
    font-family:"Hiragino Kaku Gothic ProN","Noto Sans CJK JP",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    max-width:900px;
    margin:0 auto;
    padding:28px;
    line-height:1.85
  }
  h1{
    font-size:clamp(24px,3.6vw,34px);
    margin:0 0 1rem;
    border-left:6px solid var(--accent);
    padding-left:12px
  }
  h2,h3,h4{
    margin:1.1rem 0 0.5rem;
    border-left:4px solid var(--accent);
    padding-left:10px
  }
  body>p:first-of-type{
    font-size:clamp(22px,3.2vw,30px);
    font-weight:700;
    margin:0 0 0.75rem;
    border-left:6px solid var(--accent);
    padding-left:12px
  }
  p{margin:0 0 0.6rem}
  ol,ul{margin:0.2rem 0 0.9rem 1.4rem}
  li{margin:0.25rem 0}
  table{
    width:100%;
    border-collapse:collapse;
    margin:1rem 0;
    border:1px solid var(--border)
  }
  th,td{
    border:1px solid var(--border);
    padding:8px 10px;
    vertical-align:top
  }
  tbody tr:nth-child(even){background:#fbfdff}
  @media print{
    @page{size:A4;margin:14mm}
    body{padding:0}
    body>p:first-of-type{border-color:#000}
    h1,h2,h3,h4{border-color:#000}
    .page-break-start{break-before:page;page-break-before:always;}
    .page-break-end{break-after:page;page-break-after:always;}
    .keep-with-next{break-after:avoid;page-break-after:avoid;}
    .keep-together{break-inside:avoid;page-break-inside:avoid;}
  }
</style>
<link href="../../common/style_base.css" rel="stylesheet"/>
<script defer="" src="../../common/script.js"></script>
<style>
  a { pointer-events:auto; }
  .teacher-only{display:none;}
  .teacher-mode .teacher-only{display:block;}
  .teacher-underline{
    text-decoration-line:underline;
    text-decoration-style:wavy;
    text-decoration-color:#0ea5e9;
  }
</style>
<script>
  (function(){
    // 清理历史持久化键
    try{
      var keys=['teacherMode','teacher.enabled','view-role','role','teacher_mode','ink:role'];
      keys.forEach(k=>{localStorage.removeItem(k);sessionStorage.removeItem(k);});
    }catch(e){}
    document.addEventListener('DOMContentLoaded',function(){
      document.body.classList.remove('teacher-mode');
    });
  })();
</script>
<style id="ultimate-print-override">
/* —— 终极覆盖：保证按当前模式打印 —— */
@media print {
  body.print-student .teacher-only {
    display: none !important;
    visibility: hidden !important;
  }
  body.print-teacher .teacher-only {
    visibility: visible !important;
    display: initial !important;
  }
  body.print-teacher p.teacher-only,
  body.print-teacher div.teacher-only,
  body.print-teacher section.teacher-only,
  body.print-teacher article.teacher-only,
  body.print-teacher table.teacher-only,
  body.print-teacher ol.teacher-only,
  body.print-teacher ul.teacher-only,
  body.print-teacher figure.teacher-only {
    display: block !important;
  }
  body.print-teacher li.teacher-only {
    display: list-item !important;
  }
  body.print-teacher span.teacher-only,
  body.print-teacher a.teacher-only,
  body.print-teacher em.teacher-only,
  body.print-teacher strong.teacher-only,
  body.print-teacher code.teacher-only {
    display: inline !important;
  }
}
</style>
<script id="default-student-on-load">
window.addEventListener("DOMContentLoaded",()=>{
  document.body.classList.remove("teacher-mode");
  document.body.classList.add("student");
});
</script>
<style id="line-height-img-tools">
:root { --lh: 1.85; } /* 行距对应正文行高 */
.h-3lines { height: auto; width: auto; max-height: calc(1em * var(--lh) * 3); }
.h-6lines { height: auto; width: auto; max-height: calc(1em * var(--lh) * 6); }
.h-12lines { height: auto; width: auto; max-height: calc(1em * var(--lh) * 12); }
.fig img { max-width: 100%; height: auto; }
</style>
<!-- 图片/布局相关样式 -->
<style>
:root{--ink:#0f172a;--muted:#475569;--border:#e2e8f0;--bg:#ffffff;--accent:#2563eb;}
figure{
  margin:1rem 0;
  border:1px solid var(--border);
  padding:10px;
  border-radius:10px;
  background:#f8fafc
}
figure img{
  display:block;
  width:100%;
  height:auto
}
figcaption{
  margin-top:6px;
  color:var(--muted);
  font-size:0.95rem
}
.note{
  border-left:4px solid var(--accent);
  background:#f0f7ff;
  padding:10px 12px;
  border-radius:8px;
  margin:10px 0
}
hr{
  border:none;
  border-top:1px dashed var(--border);
  margin:24px 0
}

/* === Right-side image layout === */
figure.side{
  float:right;
  max-width:36%;
  min-width:240px;
  margin:0.1rem 0 0.6rem 0.9rem;
  border:1px solid var(--border);
  padding:10px;
  border-radius:10px;
  background:#f8fafc;
  text-align:center
}
figure.side img{
  display:block;
  width:100%;
  height:auto;
  border-radius:8px;
  box-shadow:0 0 4px #ccc;
  margin:0.2rem auto
}
/* Ensure headings start on a new row, not beside floats */
h1,h2,h3{clear:both}
/* Mobile: fall back to single-column */
@media (max-width: 900px){
  figure.side{
    float:right;
    max-width:36%;
    min-width:240px;
    margin:0.1rem 0 0.6rem 0.9rem;
    border:1px solid var(--border);
    padding:10px;
    border-radius:10px;
    background:#f8fafc;
    text-align:center
  }
}
@media print{
  figure.side{
    float:right;
    max-width:36%;
    min-width:240px;
    margin:0.1rem 0 0.6rem 0.9rem;
    border:1px solid var(--border);
    padding:10px;
    border-radius:10px;
    background:#f8fafc;
    text-align:center
  }
}

/* --- 修正：避免右侧浮动与后续图片重叠/错位 --- */
figure:not(.side){clear: both;}        /* 普通图片总是在任何浮动之下开始 */
@media (max-width: 900px){
  figure:not(.side){clear: none;}
}
</style>
<style>
  /* === 教師向け：学生には空白として見えるメモ === */
.teacher-note-blank {
  display: block;
  margin: 12px 0;
  position: relative;
}

/* 教師模式：正常显示文字 */
.teacher-mode .teacher-note-blank {
  color: #0f172a !important;
  height: auto !important;
  border-bottom: none !important;
  text-decoration-line:underline;
}

/* 学生模式：内容隐藏 + 留白 */
.student .teacher-note-blank {
  color: transparent !important;   /* 文字不可见 */
  height: 16em !important;          /* ← 空白高度，可自定义 */
  border-bottom: 1px dotted #cbd5e1; 
  margin: 16px 0;
}
</style>
</head>
<body class="student">
<header class="site">
<div>
<strong>十二、無機化合物</strong>
</div>
<div>
<button class="btn btn-primary" id="btn-teacher">
      教师用
    </button>
<button class="btn" id="btn-print">
      印刷
    </button>
</div>
</header>
<main>
<h1>十二、無機化合物</h1>
<section>
  <h2>一、概説</h2>
  <p>ここに章の概要を書き、扱う無機化合物の分類や性質、重要反応などを整理していってください。</p>
</section>
<section class="teacher-only teacher-note-blank">
  教師向けメモ：授業の流れ、板書の順番、補足事項などをここに記載できます（学生モードでは空白）。
</section>
</main>
<p></p>
<script id="sanitize-print-button">
document.addEventListener('DOMContentLoaded', function () {
  var btnTeacher = document.getElementById('btn-teacher');
  if (btnTeacher) {
    btnTeacher.addEventListener('click', function(){
      var toTeacher = !document.body.classList.contains('teacher-mode');
      document.body.classList.toggle('teacher-mode', toTeacher);
      document.body.classList.toggle('student', !toTeacher);
    });
  }

  var oldBtn = document.getElementById('btn-print');
  if (!oldBtn) return;

  var btn = oldBtn.cloneNode(true);
  btn.type = 'button';
  btn.removeAttribute('onclick');
  if (btn.tagName.toLowerCase() === 'a') btn.setAttribute('href', '#');
  oldBtn.parentNode.replaceChild(btn, oldBtn);

  let printing = false;
  btn.addEventListener('click', function (e) {
    e.preventDefault();
    e.stopPropagation();
    if (e.stopImmediatePropagation) e.stopImmediatePropagation();
    if (printing) return;
    printing = true;
    const isTeacher = document.body.classList.contains('teacher-mode');
    document.body.classList.toggle('print-teacher', isTeacher);
    document.body.classList.toggle('print-student', !isTeacher);
    requestAnimationFrame(function () {
      window.print();
      setTimeout(function () {
        printing = false;
        document.body.classList.remove('print-teacher','print-student');
      }, 1200);
    });
  }, { capture: true, passive: false });
});
</script>
</body>
</html>
